<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>XMLHttpRequest的get方法</title>
    <style media="screen">
        #testID {
            color: blue !important;
        }

        .testC .tt {
            color: green;
        }

        #ttt {
            color: #CCC;
        }

    </style>
</head>

<body>
    <div id="testID" class="testC" style="color:red">
        <p class="tt" id="ttt" style="color:#FFCCDD">测试</p>
    </div>
    <script src="./request.js" charset="utf-8"></script>
    <script charset="utf-8">
        var request = createRequest()
        request.onreadystatechange = function () {
            if (request.readyState == 4) {
                // 服务器已经处理完请求，数据可以使用了
                console.log('4', request)
                if (request.status == 200) {
                    doResText(request.responseText)
                }
            }
        }

        request.open('POST', 'http://127.0.0.1:9100/form/testPOST?name=zhansan&age=100', true)
        request.setRequestHeader('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
        var loveJson = {
            sport: '足球'
        }
        var postData = "address=中国" + "&love=" + JSON.stringify(loveJson)
        // var postData = "address=123&love=足球"
        request.send(postData)

        function doResText(responseText) {
            console.log('doResText', typeof responseText, responseText, JSON.parse(responseText))
        }

    </script>
</body>

</html>
